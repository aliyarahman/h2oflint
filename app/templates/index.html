
{% extends 'base.html' %}
{% block content %}
{% load staticfiles %}


    <div class="row">
        <div class="col-xs-12">
            <video autoplay loop poster="{% static 'img/banner_poster.jpg' %}">
                <source src="https://s3.amazonaws.com/h2oflint/banner_video.mp4" type="video/mp4" />
                <source src="https://s3.amazonaws.com/h2oflint/banner_video.webm" type="video/webm">
            </video>
        </div>
    </div>

    <div class="row">
        <div class="container-fluid">
            <div class="col-xs-12 search-head-wrapper">
                <h1 class="search-headline text-center"><b>FIND OR OFFER HELP</b></h1>
                <h2 class="search-subheadline text-center"><b>Through Flint community members</b>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="user-buttons-holder">
            <div class="row">
                <div class="col-xs-12 col-md-4 user-button-holder text-center">
                    <div class="row">
                        <h3 class="blue-text"><b>I'm a Flint resident looking for assistance</b></h3>
                    </div>
                    <div class="row">
                        <div onClick='location.href="{% url 'request_delivery' %}"' class="user-button text-center lt-green-bg black-text">I need water or supplies delivered to my home</div>
                    </div>
                </div>
                    
                <div class="col-xs-12 col-md-4 user-button-holder text-center">
                    <div class="row">
                        <h3 class="blue-text"><b>I'm an individual who wants to help</b></h3>
                    </div>
                    <div class="row">
                        <div onClick='location.href="{% url 'individual_offer' %}"' class="user-button text-center salmon-bg black-text">I want to volunteer</div>
                        <div onClick='location.href="{% url 'individual_offer' %}"' class="user-button text-center yellow-bg black-text">I want to donate water, supplies, or money</div>
                    </div>
                </div>

                <div class="col-xs-12 col-md-4 user-button-holder text-center">
                    <div class="row">
                        <h3 class="blue-text"><b>My organization needs or can offer help</b></h3>
                    </div>
                    <div class="row">
                        <div onClick='location.href="{% url 'organization_offer' %}"' class="user-button text-center dk-purple-bg white-text">We can distribute water or other supplies</div>
                        <div onClick='location.href="{% url 'organization_offer' %}"' class="user-button text-center lt-blue-bg black-text">We need volunteers or help distributing</div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-xs-12 col-md-6 col-md-offset-1 todays-locations">
                <h3 class="blue-text">Community Distribution Centers Open Today</h3>

                <div class="results-legend">
                    <span class="results-legend-item"><span class="glyphicon glyphicon-tint blue-text"></span> = Has water</span>
                    <span class="results-legend-item"><span class="glyphicon glyphicon-filter blue-text"></span> = Has filters</span>
                    <span class="results-legend-item"><span class="glyphicon glyphicon-bold blue-text"></span> = Has baby supplies</span>
                </div>


            {% for location in locations %}
                <div class="row">
                    <div class="col-xs-10 col-xs-offset-1 location-result">
                        <div class="row">
                            <div class="col-xs-9">
                                <h4 class="location-name"><b>{{location.org_name}}</b></h4>
                                <span class="location-address"><b>{{location.address}}</b></span>
                            </div>
                            <div class="col-xs-3 icon-holder">  <h3 class="blue-text">
                                {% if location.has_water == True %}
                                    <span class="glyphicon glyphicon-tint pull-right"></span>
                                {% endif %}
                                {% if location.has_filters == True %}
                                    <span class="glyphicon glyphicon-filter pull-right"></span>
                                {% endif %}
                                </h3>
                            </div>
                        </div>
                        <div clas="row">
                            <div class="col-xs-6 result-details">
                                Distribution hours:
                                <ul>

                                    {% if location.monday_dist_start %}
                                    <li><b>Monday:</b> {{location.monday_dist_start}}-{{location.monday_dist_end}}</li>
                                    {% endif %}

                                    {% if location.tuesday_dist_start %}
                                    <li><b>Tuesday:</b> {{location.tuesday_dist_start}}-{{location.tuesday_dist_end}}</li>
                                    {% endif %}

                                    {% if location.wednesday_dist_start %}
                                    <li><b>Wednesday:</b> {{location.wednesday_dist_start}}-{{location.wednesday_dist_end}}</li>
                                    {% endif %}

                                    {% if location.thursday_dist_start %}
                                    <li><b>Thursday:</b> {{location.thursday_dist_start}}-{{location.thursday_dist_end}}</li>{% endif %}

                                    {% if location.friday_dist_start %}
                                    <li><b>Friday:</b> {{location.friday_dist_start}}-{{location.friday_dist_end}}</li>
                                    {% endif %}

                                    {% if location.saturday_dist_start %}
                                    <li><b>Saturday:</b> {{location.saturday_dist_start}}-{{location.saturday_dist_end}}</li>
                                    {% endif %}

                                    {% if location.sunday_dist_start %}
                                    <li><b>Sunday:</b> {{location.sunday_dist_start}}-{{location.sunday_dist_end}}</li>
                                    {% endif %}
                                </ul>
                            </div>
                            <div class="col-xs-6">
                                {% if location.phone != '' %}<br><b>Phone</b>: {{location.phone}}{% endif %}
                                {% if location.website != '' %}<br><b>Website</b>: <a href="{{location.website}}">{{location.website}}</a>{% endif %}
                                {% if location.email|length > 1 %}<br><b>Email</b>: {{location.email}}{% endif %}
                            </div>
                            


                        </div>
                        
                    </div>
                </div>

            {% endfor %}
            </div>

            <div class="col-xs-12 col-md-5 map-panel">
                
                <div class="row search-bar text-center">
                    <div class="col-xs-12 col-md-12">
                        <input type="text" class="form-control input-lg" placeholder="Enter your address or zip code">
                    </div>
                    <div class="col-xs-12 col-md-2 text-center">
                        
                    </div>

                </div>

                <div class="row">
                    <div class="col-xs-12">
                        <div class="text-center search-list-button">
                            <button type-"button" class="btn btn-lg btn-primary zoom-button">Zoom in</button>
                            or
                            <button onClick='location.href="{% url 'search' %}"' class="btn btn-lg info ">See all distribution sites
                        </div>
                    </div>
                    <div class="col-xs-12">
                        <div id="map-canvas" class="img-responsive">
                        </div>
                    </div>
                </div>
                <div class="row">

                    <div class="col-xs-12">
                        <h4 class="blue-text"><b>Tweet us your real-time experiences at distribution centers to have them appear here and inform your neighbors</b></h4>
                        <a class="twitter-timeline" href="https://twitter.com/flint_h2o" data-widget-id="700715276451459072">Tweets by @flint_h2o</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </div>
                </div>
            </div>

        </div>


    </div>



    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdQa5vpC7SE5LdZAXXxGNcKJpJGmBYd6E">
    </script>

    <script type="text/javascript">
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(43.0125274, -83.6874562),
                zoom: 12
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"),
                mapOptions);
            
            {% for location in locations %}
            var marker1 = new google.maps.Marker({
                position: new google.maps.LatLng({{location.latitude}}, {{location.longitude}}),
                map: map,
                title: "{{location.org_name}}\n{{location.address}}\nFlint, MI{{location.zipcode}}\n {{location.phone}}"
            });
            {% endfor %}

            }
          google.maps.event.addDomListener(window, 'load', initialize);
    
            

    </script>


{% endblock %}