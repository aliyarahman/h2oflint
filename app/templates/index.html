
{% extends 'base.html' %}
{% block content %}
{% load staticfiles %}


    <div class="row">
        <div class="col-xs-12">
            <video autoplay loop poster="{% static 'img/banner_poster.jpg' %}">
                <source src="{% static 'img/banner_video.mp4' %}" type="video/mp4" />
                <source src="{% static 'img/banner_video.webm' %}" type="video/webm">
            </video>
        </div>
    </div>

    <div class="row">
        <div class="container-fluid">
            <div class="col-xs-12 search-head-wrapper">
                    <h1 class="search-headline text-center"><b>FIND OR OFFER HELP</b></h1>
                    <h2 class="search-subheadline text-center"><b>Through Flint community members</b>
            </div>
        </div>
    </div>

    <div class="container-fluid">
       
        <div class="row">
            <div class="col-xs-10 col-xs-offset-1 col-md-5 todays-locations">
                <h2 class="blue-text">Distribution Centers Open Today</h2>

                <div class="results-legend">
                    <span class="results-legend-item"><span class="glyphicon glyphicon-tint blue-text"></span> = Has water</span>
                    <span class="results-legend-item"><span class="glyphicon glyphicon-filter blue-text"></span> = Has filters</span>
                    <span class="results-legend-item"><span class="glyphicon glyphicon-bold blue-text"></span> = Has baby supplies</span>
                </div>


            {% for location in locations %}
                <div class="row">
                    <div class="col-xs-10 col-xs-offset-1 location-result">
                        <div class="col-xs-10">
                        <h3 class="location-name"><b>{{location.org_name}}</b></h3>
                        <p>
                            {{location.address}}
                            {% if location.phone != '' %}<br><b>Phone</b>: {{location.phone}}{% endif %}
                            {% if location.website != '' %}<br><b>Website</b>: <a href="{{location.website}}">{{location.website}}</a>{% endif %}
                            {% if location.email != '' %}<br><b>Email</b>: {{location.email}}{% endif %}
                        </p>
                        
                        Distribution hours:
                        <ul>

                            {% if location.monday_dist_start %}
                            <li><b>Monday:</b> {{location.monday_dist_start}}-{{location.monday_dist_end}}</li>
                            {% endif %}

                            {% if location.tuesday_dist_start %}
                            <li><b>Tuesday:</b> {{location.tuesday_dist_start}}-{{location.tuesday_dist_end}}</li>
                            {% endif %}

                            {% if location.wednesday_dist_start %}
                            <li><b>Wednesday:</b> {{location.wednesday_dist_start}}-{{location.wednesday_dist_end}}</li>
                            {% endif %}

                            {% if location.thursday_dist_start %}
                            <li><b>Thursday:</b> {{location.thursday_dist_start}}-{{location.thursday_dist_end}}</li>{% endif %}

                            {% if location.friday_dist_start %}
                            <li><b>Friday:</b> {{location.friday_dist_start}}-{{location.friday_dist_end}}</li>
                            {% endif %}

                            {% if location.saturday_dist_start %}
                            <li><b>Saturday:</b> {{location.saturday_dist_start}}-{{location.saturday_dist_end}}</li>
                            {% endif %}

                            {% if location.sunday_dist_start %}
                            <b>Sunday:</b> {{location.sunday_dist_start}}-{{location.sunday_dist_end}}</li>
                            {% endif %}
                        </div>
                        <div class="col-xs-2 icon-holder">  <h3 class="blue-text">
                            {% if location.has_water == True %}
                                <span class="glyphicon glyphicon-tint pull-right"></span>
                            {% endif %}
                            {% if location.has_filters == True %}
                                <span class="glyphicon glyphicon-filter pull-right"></span>
                            {% endif %}
                            </h3>
                        </div>
                    </div>
                </div>

            {% endfor %}
            </div>

            <div class="col-xs-12 col-md-6 map-panel">
                
                <div class="row search-bar text-center">
                    <div class="col-xs-10">
                        <input type="text" class="form-control input-lg" placeholder="Enter your address or zip code to zoom to your area">
                    </div>
                    <div class="col-xs-12 col-md-2 text-center">
                        <button type-"button" class="btn btn-lg btn-primary">Zoom in</button>
                    </div>

                </div>

                <div class="row">
                    <div class="col-xs-12">
                        <div class="pull-right search-list-button">or <button onClick='location.href="{% url 'search' %}"' class="btn btn-lg info">Search all sites
                        </div>
                    </div>
                    <div class="col-xs-12">
                        <div id="map-canvas" class="img-responsive">
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="row text-center">
            <div class="col-xs-12 col-md-3 col-md-offset-1 user-button-holder text-center">
                <h2>I'm a Flint resident looking for assistance</h2>
                <div onClick='location.href="{% url 'request_delivery' %}"' class="user-button text-center dk-blue-bg white-text">I need water or supplies delivered to my home</div>
                <!--<div class="user-button text-center dk-blue-bg white-text">I want to give feedback about a distribution center experience</div>-->
            </div>
                
            <div class="col-xs-12 col-md-3 user-button-holder">
                <h2>I'm an individual who wants to help</h2>
                <div onClick='location.href="{% url 'individual_offer' %}"' class="user-button text-center purple-bg white-text">I want to volunteer</div>
                <div onClick='location.href="{% url 'individual_offer' %}"' class="user-button text-center purple-bg white-text">I want to donate water, supplies, or money</div>
            </div>

            <div class="col-xs-12 col-md-3 user-button-holder">
                <h2>My organization needs or can offer help</h2>
                <div onClick='location.href="{% url 'organization_offer' %}"' class="user-button text-center extra-lt-purple-bg white-text">We can provide volunteers or distribute water or supplies</div>
                <div onClick='location.href="{% url 'organization_offer' %}"' class="user-button text-center extra-lt-purple-bg white-text">We need volunteers or help distributing</div>
            </div>
        </div>
    </div>



    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7cQS9WA8nCS92ofzoQ0UtrKA6drw6fOI">
    </script>

    <script type="text/javascript">
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(43.0125274, -83.6874562),
                zoom: 12
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"),
                mapOptions);
            
            {% for location in locations %}
            var marker1 = new google.maps.Marker({
                position: new google.maps.LatLng({{location.latitude}}, {{location.longitude}}),
                map: map,
                title: "{{location.name}}"
            });
            {% endfor %}

            }
          google.maps.event.addDomListener(window, 'load', initialize);
    
            

    </script>


{% endblock %}